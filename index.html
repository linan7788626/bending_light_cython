<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Gravitational Lensing Toys by linan7788626</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Bending Light: Tools for Exploring Gravitational Lensing</h1>
        <h2></h2>
        <a href="https://github.com/linan7788626/cython_pylensing_toys" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h3>

<p>This is an improved version of my <strong><em>Glensing Toy</em></strong> with <strong><em>Cython</em></strong> boosting. <strong><em>Glensing Toy</em></strong> is a software to demonstrate what gravitational lensing is. By using some combinations of mouse and keys, you can control sources and lenses. <strong><em>Glensing Toy</em></strong> shows both sources (white balls) and lensed images (blue arcs). Moreover, caustic and critical curves of this lensing system are shown by default (Figure 1). By pressing "f" or "g", you can also take a look at the properties of lenses (Figure 3), and the simulated observation of the lensing system (Figure 2). </p>

<p>Figure 1:
<img src="./images/figure0.png" alt="Figure 1">
Figure 2:<br>
<img src="./images/figure1.png" alt="Figure 2">
Figure 3:
<img src="./images/figure2.png" alt="Figure 3"></p>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<ol>
<li>
<p>Dependences:  </p>

<ul>
<li>
<a href="https://www.python.org">Python2.7</a>, <a href="http://www.numpy.org">Numpy</a>, <a href="http://www.pygame.org">Pygame</a>, <a href="http://cython.github.io">Cython</a> and <a href="https://www.libsdl.org">SDL</a>.</li>
<li>If you are using Linux, you can install all these packages using the default package manager, for example, apt-get for Debian and Ubuntu, yum for Fedora and Redhat,  pacman for Archlinux and so on.</li>
<li>If you are using Mac, I would recommend <a href="https://www.macports.org">Macports</a> or <a href="http://brew.sh">Homebrew</a> to install these packages.</li>
<li>My favorite way to install all the dependences is using <a href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>. Once you installed Anaconda, the environment of python2.7 is ready.</li>
</ul>

<p>THEN</p>

<div class="highlight highlight-source-shell"><pre>$ conda install -c https://conda.binstar.org/quasiben pygame</pre></div>

<p>If your SDL is not installed in /usr/local/lib, you need to link it to the default directory.</p>

<div class="highlight highlight-source-shell"><pre>$ sudo ln /opt/local/lib/libSDL-1.2.0.dylib /usr/local/lib/libSDL-1.2.0.dylib</pre></div>

<ul>
<li>I have got the first version of a standalone APP for Mac using <a href="http://pythonhosted.org/py2app/">py2app</a>. You can find it here: <a href="https://www.dropbox.com/s/uuaf13nfcoet44c/Lensing%20Toy.zip?dl=0">Lensing Toy</a>.</li>
</ul>
</li>
<li>
<p>Installation:  </p>

<ul>
<li>Clone it or download it,<br>
</li>
</ul>

<p>THEN</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> libs
$ python2.7 setup.py build_ext --inplace</pre></div>

<p>OR</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> libs
$ ./make_so</pre></div>
</li>
<li>
<p>Code Running:  </p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> ../
$ python2.7 multiple_sources.py</pre></div>
</li>
</ol>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<ol>
<li>
<p>How to control sources:<br>
You can use the left click of the mouse to control the sources, but first of all, you need to hold one NUM key to choose a source you want to handle. Here, "1" stands for the first source, "2~9" stand for the added sources. Defaultly, one source is hown. Furthermore,  bullets below show the details on controling the source you pick.</p>

<ul>
<li>Holding a NUM key to pick a source you want to play with. </li>
<li>Holding "w" and left click, you can move you mouse to move the position of the source.</li>
<li>Holding "s" and left click, you can move you mouse vertically to change the size of the source.</li>
<li>Holding "e" and left click, you can move you mouse vertically to change the ellipticity of the source, or, horizontally to change the orientation of the source.</li>
</ul>
</li>
<li>
<p>How to control lenses:<br>
You can use the right click of the mouse to control the lenses.
Similar with the source, at the same time, you need to press on number key to claim which component you want to control (Here, "1" stands for the main halo, "2~9" stand for the sub halos. ) and  press one key to claim what properties you would like to change. For example, if you want to change the ellipticity and orientation of the main halo: please hold "1", "e" and right click, then move vertically, the ellipticity of the main halo will be changed, move horizontally, the orientation of the main halo will be changed. Because we are using Non-singular Isothermal Ellipsoid (NIE) model in this code, so when you press "s" to change the size of the lens, there are two sizes, one is the Einstein Radius (move your mouse vertically), the other one is the core radius (move your mouse horizontally). If you want to control the subhalos, please hold "2" first, then do everything you want.  </p>

<ul>
<li>Holding a NUM key to pick a component you want to play with. </li>
<li>Holding "w" and right click, you can move you mouse to move the position of the chosen component of the lens.</li>
<li>Holding "s" and right click, you can move you mouse vertically to change the Einstein radius of chosen component, or, horizontally to change the Core radius of the chosen component.</li>
<li>Holding "e" and right click, you can move you mouse vertically  to change the ellipticity of the chosen component, or, horizontally to change the orientation of the chosen component.</li>
</ul>
</li>
<li>
<p>How to add or remove satellite galaxies and sources: 
There is only one subhalo intrinsically. However, in our code, we can also add or remove subhalos if needed. So far, you can only add 8 subhalos at most. Similarly, you can also control the number of sources.</p>

<ul>
<li>Hold "=", click the right click to add a subhalo.</li>
<li>Hold "-", click the right click to remove the last added subhalo. </li>
<li>Hold "=", click the left click to add a source.</li>
<li>Hold "-", click the left click to remove the last added source.</li>
</ul>
</li>
<li><p>Toggles:<br>
Try "f" and "g". :-)</p></li>
</ol>

<h3>
<a id="todo-list" class="anchor" href="#todo-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Todo List</h3>

<ol>
<li>
<p>Sources</p>

<ul>
<li>[x] More sources.</li>
<li>[x] More models of sources (Sersic, Moffat, Disk+Bulge...).</li>
<li>[x] Real galaxies images.</li>
<li>[x] Arbitrary pictures (for fun).</li>
</ul>
</li>
<li>
<p>Lenses</p>

<ul>
<li>[x] More models of lenses (PIEMD, GNFW, NFW+Hernquist, Burkert...).</li>
<li>[x] Directly input mass sheet.</li>
<li>[x] More satellite galaxies?</li>
<li>[-] Realistic images of satellite galaxies.</li>
</ul>
</li>
<li>
<p>Algorithm </p>

<ul>
<li>[-] Anti-Aliasing.</li>
<li>[-] Better caustic drawer.</li>
</ul>
</li>
<li>
<p>Time Delay</p>

<ul>
<li>[x] Implementing in twinkles branch.</li>
</ul>
</li>
<li>
<p>Competition Model</p>

<ul>
<li>[-] Input lensed images by one person.</li>
<li>[-] Reconstruct it by another one.</li>
<li>[-] Score the matching.</li>
</ul>
</li>
<li>
<p>Input and Output</p>

<ul>
<li>[-] Save the parameters of current lensing system, including lenses and sources.</li>
<li>[-] Make the catalog of lensing system to be an input file.</li>
<li>[-] Show all the parameters of current lensing system in real time.</li>
</ul>
</li>
</ol>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/linan7788626/cython_pylensing_toys/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/linan7788626/cython_pylensing_toys/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/linan7788626/cython_pylensing_toys"></a> is maintained by <a href="https://github.com/linan7788626">linan7788626</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
